<html>
<head>
    <title>Send Only</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@posten/hedwig@8/dist/bring.css"/>
</head>
<body>
<div class="hw-container hw-container--wide">
    <div class="hw-block hw-block--px hw-block--mt-small">
        <label class="hw-label">
            Enter data
            <input id="data" class="hw-input" type="text" placeholder="Enter Data to Send" name="send-data" />
        </label>
        <button class="hw-button hw-button--primary" id="getData">
            Send Data
        </button>
    </div>

</div>

<script src="./chirp-v3.min.js"></script>
<script src="https://public.chirp.io/wasm/latest/chirp-connect.js"></script>
<script>
    var i=0;
    document.getElementById("getData").addEventListener("click",function(){
       var data_to_send a= document.getElementById("data").value;
            sendData(data_to_send,i++);
    })
    function sendData(data_to_send,incrementer){
        const {Chirp}  = ChirpConnectSDK;
        Chirp({
          key: '0daF3A19b4E3bcEA42FA06DD6',
          onStateChanged: (previous, current) => {
            console.log(current)
          }
        }).then(sdk => {
          console.log(sdk);
          var send_data = data_to_send+incrementer;
          sdk.send(send_data);
        }).catch(console.error)
    }
</script>
</body>
</html>
